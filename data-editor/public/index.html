<!DOCTYPE html>
<html lang="en">
<head>
    
    <title>Data Editor</title>

    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <script src="/node_modules/d3/dist/d3.min.js"></script>
    <script src="/node_modules/arquero/dist/arquero.min.js"></script>

    <script src="/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="/node_modules/jquery-mockjax/dist/jquery.mockjax.js"></script>

    <!-- DataTables -->

    <script src="/node_modules/datatables.net/js/jquery.dataTables.js"></script>

    <!-- DataTables with bootstrap styling -->

    <link rel="stylesheet" href="/node_modules/datatables.net-bs5/css/dataTables.bootstrap5.css"/>
    <script src="/node_modules/datatables.net-bs5/js/dataTables.bootstrap5.js"></script>

    <!-- DT select -->

    <script src="/node_modules/datatables.net-select/js/dataTables.select.js"></script>

    <script src="/node_modules/datatables.net-select-bs5/js/select.bootstrap5.js"></script>
    <link rel="stylesheet" href="/node_modules/datatables.net-select-bs5/css/select.bootstrap5.css" />

    <!-- DT plugins -->

    <script src="/node_modules/datatables.net-fixedheader/js/dataTables.fixedHeader.js"></script>
    <script src="/node_modules/datatables.net-plugins/sorting/absolute.js"></script>

    <!-- bootstrap -->

    <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.css"/>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.bundle.js"></script>

    <link rel="stylesheet" href="/node_modules/bootstrap-icons/font/bootstrap-icons.css"/>

    <!-- fontawesome -->

    <link rel="stylesheet" href="/node_modules/@fortawesome/fontawesome-free/css/all.css"/>

    <!-- flexdatalist -->

    <link rel="stylesheet" href="/node_modules/jquery-flexdatalist/jquery.flexdatalist.min.css"/>
    <script src="/node_modules/jquery-flexdatalist/jquery.flexdatalist.min.js"></script>

    <!-- others -->

    <script src="/node_modules/table-to-json/lib/jquery.tabletojson.js"></script>

    <script src="js/SimpleTableCellEditor.js"></script>

    <script src="js/BESP_EHDP_data.js"></script>
    <script src="js/BESP_IndicatorAnalysis.js"></script>

    <link rel="stylesheet" href="css/custom.css"/>

</head>
<body>

<div class="container-fluid mx-0">
    <div class="d-flex row px-3 pt-1">
        <div class="col-12">

            <div class="btn-group" role="group">

                <!-- new branch -->

                <button class="btn btn-md btn-secondary" id="new_branch" type="button" title="Create new branch">
                    <span class='fs-lg'></span>
                    <i class='fas fa-plus fa-lg' aria-hidden='true'></i>
                </button>

                <!-- current branch -->

                <div class="btn btn-outline-secondary text-dark pe-none" id="branch"><i class='fas fa-code-branch fa-lg' aria-hidden='true'></i>&nbsp;<pre></pre></div>
                
            </div>


            <!-- exit button -->

            <button class="btn btn-md btn-danger" id="exit" type="button" title="Exit Node.js process">
                <i class='fas fa-power-off fa-lg' aria-hidden='true'></i><span class='fs-lg'></span>
            </button>


            <!-- commit button -->

            <button class="btn btn-md btn-success" id="commit" type="button" title="Commit changes to a new branch and open PR">
                <i class='fas fa-arrow-up fa-lg' aria-hidden='true'></i><span class='fs-lg'></span>
            </button>


            <!-- table change button -->

            <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                <button id="table_button" type="button" class="btn btn-md btn-primary dropdown-toggle" 
                        data-bs-toggle="dropdown" aria-expanded="false" style="font-family: monospace;"></button>
                <ul id="table_names" class="dropdown-menu"></ul>
            </div>

            <button class="btn btn-md btn-secondary dropdown-toggle" type="button"
                    id="viz_type_button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" 
                    style="font-family: monospace;"></button>
            <div id="viz_type_names" class="dropdown-menu" aria-labelledby="viz_type_button">
                <!-- INSERT MENU ITEMS HERE -->
            </div>

            <!-- flexdatalist field -->

            <div id="flex_btn_group" class="btn-group" role="group" style="display: none;">

                <input 
                    id="flex_search"
                    type='text'
                    class='flexdatalist form-control'
                    name='indicator_name_suggestion'
                ></input>

                <button id="clear" class="btn btn-md btn-warning">Clear</buttom>

            </div>

        </div>

    </div>
    
    <div class="d-flex row justify-content-start">
        <div id="table" class="" style="height:550px!important">
            <!-- INSERT SUMMARY TABLE HERE -->
        </div>
    </div>

</div>
    <script>

        // ======================================================================= //
        // load database
        // ======================================================================= //

        let data_table;
        
         fetch("database")
            .then(response => response.text())
            .then(database => {

                console.log("database:", database);

                if (database == "BESP_IndicatorAnalysis") {

                    console.log("*** BESP_IndicatorAnalysis");

                    show_BESP_IndicatorAnalysis()

                } else if (database == "BESP_EHDP_data") {

                    console.log("*** BESP_EHDP_data");

                    show_BESP_EHDP_data()

                }

            })


    </script>
</body>
</html>